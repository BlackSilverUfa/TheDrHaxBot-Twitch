# TheDrHaxBot-Twitch

Этот бот заточен под канал [BlackUFA](https://twitch.tv/blackufa) и делает полезные (и не очень) вещи. Бот сделан в [Node-RED](https://nodered.org/), поэтому здесь публикуются лишь обособленные участки кода. С полным кодом пока проблемы, так как его не существует.

## Команды для модераторов

> Примечание: квадратные скобки используются для примера, их не нужно писать в самих командах

* `!tdhbot` - команда для управления командами (да)
  * Имена команд не могут содержать специальные символы (в том числе "!");
  * Типы команд:
    * `helper` - команда с постоянным ответом (без логики);
    * `counter` - счётчик;
    * `alias` - псевдоним для другой команды;
  * `!tdhbot list` - показать список существующих команд;
    * Команды, отмеченные звездочкой, являются алиасами. Используйте `!tdhbot regex`, чтобы узнать, на что они реагируют на самом деле;
  * `!tdhbot add [тип] [название] [параметры]` - добавить новую команду;
    * `!tdhbot add helper аможет а может тебя? Jebaited` - добавляет команду !аможет;
    * `!tdhbot add counter смерть умерли` - добавляет счётчик !смерть;
    * `!tdhbot add alias анонс грейпфрут` - заставляет команду !анонс реагировать на !грейпфрут;
  * `!tdhbot remove [название]` - удалить существующую команду;
    * `!tdhbot remove аможет` - удаляет команду !аможет;
    * `!tdhbot remove анонс грейпфрут` - удаляет команду !грейпфрут;
    * `!tdhbot remove анонс` - удаляет все алиасы команды !анонс (сам !анонс продолжит работать);
  * `!tdhbot update [название] [параметры]` - обновить настройки команды;
    * Работает только с типами `helper` и `counter`
    * `!tdhbot update аможет а может не надо?` - обновляет текст ответа !аможет;
  * `!tdhbot regex [название] [шаблон]` - посмотреть или изменить регулярное выражение для команды;
    * `!tdhbot regex help` - выводит `текущее значение: help|команды`;
    * `!tdhbot regex help help|команды|помощь` - заставляет !help реагировать также на !помощь;

* Счётчики (на примере !смерти):
  * Добавление: `!tdhbot add counter смерти умерли`;
  * Проверка значения: `!смерти` - ответит `умерли уже N раз`;
  * Увеличить значение на 1: `!смерти +`;
  * Уменьшить значение на 1: `!смерти -`;
  * Установить произвольное значение: `!смерти = [число]`;

* `!анонс`
  * Анонс действует до 6:00 МСК следующего дня;
  * `!анонс set [текст]` - установить новый текст анонса;
  * `!анонс tweet` - загрузить текст анонса из самого свежего твита;
  * `!анонс tweet [ID твита]` - загрузить текст анонса из твита по ID;
    * ID берётся из ссылки на твит. Например, у [этого твита](https://twitter.com/Sempai_Black/status/1473975922126737412) ID - `1473975922126737412`;
  * `!анонс reuse` - восстановить предыдущий анонс (например, для нескольких выходных подряд);
  * `!анонс reset` - удалить текущий анонс (можно восстановить через `reuse`);

* `!игра`
  * `!игра set [название игры]` - установить название игры, если её нет в категориях;
  * `!игра reset` - отменить изменение и вернуть игру из категории;

* `!tlou2` - счетчик дней от последней шутки про TLOU2
  * `!tlou2 reset` - сбросить значение на текущий момент
  * `!tlou2 set [дата]` - установить другое значение
    * примеры: `2 часа назад`, `2 дня назад`, `22 декабря 18:00` и т.д.
